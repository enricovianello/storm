<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping SYSTEM "http://hibernate.sourceforge.net/hibernate-mapping-2.0.dtd">

<!--
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping SYSTEM "C:\develop\hibernate-2.1\src\net\sf\hibernate\hibernate-mapping-2.0.dtd">
-->

<!--
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD//EN" "http://hibernate.sourceforge.net/hibernate-configuration-2.0.dtd">
-->

<hibernate-mapping>

  <class name="it.grid.storm.persistence.model.StorageSpaceTO"
    table="STORAGE_SPACE"
    lazy="true">

    <id name="storageSpaceId" type="long" column="SS_ID" unsaved-value="null">
      <generator class="native"/>
    </id>

    <property name="ownerName" type="string"  column="USERDN" length="150" not-null="true"/>

    <!--
    <property name="voName" type="string"  column="VO" length="20"/>
    -->

    <!--
    <property name="spaceType" type="string"  column="SPACETYPE" length="10" not-null="true"/>
    -->

    <!--
    <property name="alias" type="string" column="ALIAS" length="100" not-null="true"/>

    <property name="spaceToken" type="string"  column="SPACE_TOKEN" not-null="true"/>
    -->

    <!--
    <property name="spaceFile" column="SPACE_FILE" type="java.io.File" update="false" not-null="false" />
    -->

    <!-- We can't change the creation time, so map it with update="false". -->
    <!--
    <property name="created" column="CREATED"  type="java.util.Date" update="false" not-null="false" />

    <property name="totalSize" type="long"  column="TOTAL_SIZE" not-null="false"/>

    <property name="guaranteedSize" type="long"  column="GUAR_SIZE" not-null="false"/>

    <property name="unusedSize" type="long"  column="FREE_SIZE" not-null="false"/>
    -->

    <!-- We use a one-to-many association to express the relationship
    to a set of pins.
    -->

    <set    name="storageFiles"
      cascade="all-delete-orphan"
      inverse="true"
      lazy="true">
      <key foreign-key="FK_SF_ID">
        <column name="SF_ID" not-null="true" length="16"/>
      </key>
      <one-to-many class="it.grid.storm.persistence.model.StorageFileTO"/>
    </set>

  </class>
</hibernate-mapping>
