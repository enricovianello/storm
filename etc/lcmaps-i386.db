# LCMAPS policy file/plugin definition
#
### default path
path = /opt/glite/lib/modules

### Plugin definitions:
good             = "lcmaps_dummy_good.mod"
bad              = "lcmaps_dummy_bad.mod"
localaccount     = "lcmaps_localaccount.mod"
                       "-gridmapfile /etc/grid-security/grid-mapfile"
poolaccount      = "lcmaps_poolaccount.mod"
                       "-gridmapfile /etc/grid-security/grid-mapfile"
                       "-gridmapdir /etc/grid-security/gridmapdir"
                       "-override_inconsistency"
vomslocalgroup   = "lcmaps_voms_localgroup.mod"
                       "-groupmapfile /etc/grid-security/groupmapfile"
                       "-mapmin 0"
#vomspoolgroup    = "lcmaps_voms_poolgroup.mod"
#                       "-groupmapfile /etc/grid-security/groupmapfile"
#                       "-groupmapdir /etc/grid-security/groupmapdir"
#                       "-override_inconsistency"
#                       "-mapmin 0"
vomspoolaccount  = "lcmaps_voms_poolaccount.mod"
                       "-gridmapfile /etc/grid-security/grid-mapfile"
                       "-gridmapdir /etc/grid-security/gridmapdir"

### Policies:
# 
# Prima cerca di individuare il gruppo primario, in base alle
# credenziali VOMS; se questo ha successo, prosegue a cercare di
# allocare un pool account in base alle credenziali VOMS.  Se uno dei
# due passi fallisce, cerca di mappare in un poolaccount seguendo il
# normale /etc/grid-security/grid-mapfile. Se anche questo fallisce
# cerca di mappare su un account locale (necessario per gli utenti
# *sgm)

acquisition_policy:
vomslocalgroup -> vomspoolaccount | poolaccount
vomspoolaccount -> good | poolaccount
poolaccount -> good | localaccount

standard:
vomslocalgroup -> vomspoolaccount | poolaccount
vomspoolaccount -> good | poolaccount
poolaccount -> good | localaccount
